var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var Diolog_1 = require("./Scripts/Diolog");
var Button1_1 = require("./Scripts/Button1");
var Reader_1 = require("./Scripts/Reader");
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
        reg("Scripts/Diolog.ts", Diolog_1.default);
        reg("Scripts/Button1.ts", Button1_1.default);
        reg("Scripts/Reader.ts", Reader_1.default);
    };
    GameConfig.width = 1920;
    GameConfig.height = 1080;
    GameConfig.scaleMode = "full";
    GameConfig.screenMode = "none";
    GameConfig.alignV = "middle";
    GameConfig.alignH = "left";
    GameConfig.startScene = "Msg.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = false;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{"./Scripts/Button1":3,"./Scripts/Diolog":4,"./Scripts/Reader":5}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var Main = /** @class */ (function () {
    function Main() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    Main.prototype.onVersionLoaded = function () {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    };
    Main.prototype.onConfigLoaded = function () {
        //加载IDE指定的场景
        GameConfig_1.default.startScene && Laya.Scene.open(GameConfig_1.default.startScene);
    };
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":1}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Diolog_1 = require("./Diolog");
var Button1 = /** @class */ (function (_super) {
    __extends(Button1, _super);
    function Button1() {
        return _super.call(this) || this;
    }
    Button1.prototype.onEnable = function () {
        var button = this.owner;
        button.on(Laya.Event.CLICK, this, function () {
            Diolog_1.default.instance.button1Click();
        });
    };
    return Button1;
}(Laya.Script));
exports.default = Button1;
},{"./Diolog":4}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Reader_1 = require("./Reader");
var DiaLab = /** @class */ (function (_super) {
    __extends(DiaLab, _super);
    function DiaLab() {
        var _this = _super.call(this) || this;
        _this.story = [""]; //文本
        DiaLab.instance = _this;
        return _this;
    }
    DiaLab.prototype.createChildren = function () {
        _super.prototype.createChildren.call(this);
        this.loadScene("Msg");
    };
    DiaLab.prototype.onEnable = function () {
        this.Diolog.on(Laya.Event.CLICK, this, this.ClickFn);
    };
    DiaLab.prototype.onAwake = function () {
        this.reader = this.getComponent(Reader_1.default);
        this.onlyOnce = false;
        this.line = 7;
        this.word = 0;
        this.chaNum = 6;
        this.findNext = 4;
        this.lineComplete = false;
        this.ShowWords();
    };
    DiaLab.prototype.button1Click = function () {
    };
    DiaLab.prototype.ShowWords = function () {
        var _this = this;
        this.reader.read(this.chaNum);
        this.showWord = setInterval(function () {
            _this.splitted = _this.story[_this.line][_this.word]; //把文本拆開 +1是為了避開 開頭的代號
            if (_this.splitted == undefined)
                return; //運行到最後一字時 避免出錯  
            _this.Diolog.text += _this.splitted;
            _this.word++; //跳下一個字            
            if (_this.story[_this.line][_this.word] == undefined) { //判斷此句是否結束
                clearInterval(_this.showWord); //關閉showWord
                _this.lineComplete = true;
            }
        }, 150);
    };
    DiaLab.prototype.isEnd = function () {
        if (this.story[this.line + this.findNext] == undefined) { //文本是否結束
            this.Diolog.off(Laya.Event.CLICK, this, this.ClickFn); //關閉點擊事件
            console.log("結束");
            return;
        }
        else if (this.story[this.line][this.word] == undefined) { //此句是否結束
            this.onlyOnce = true;
            this.word = 0;
            this.Diolog.text = "";
            this.line += this.findNext; //下一句話
            this.chaNum += this.findNext; //下一個人
            return;
        }
    };
    DiaLab.prototype.ClickFn = function (e) {
        this.lineComplete = !this.lineComplete;
        if (this.lineComplete) { //文字還沒跳完時 點擊使他一次跳完
            clearInterval(this.showWord);
            this.word = this.story[this.line].length; //this.word = 此句最後一個字 (作為條件判斷是否進入下一句)
            this.Diolog.text = this.story[this.line]; //.substring(0, this.story[this.line].length);//跳出完整句子 避開 開頭代號
        }
        else { //文字跳完時 點擊跳出下一句 並呼叫showWord
            this.isEnd();
            this.ShowWords();
        }
    };
    DiaLab.prototype.nameCase = function (name) {
        switch (name) {
            case "吳俞恆":
                this.Name.text = "吳俞恆";
                break;
            case "少女":
                this.Name.text = "少女";
                break;
            case "":
                this.Name.text = "";
                break;
            case "D":
                this.Name.text = "D";
                break;
            case "E":
                this.Name.text = "E";
                break;
            case "F":
                this.Name.text = "F";
                break;
            case "G":
                this.Name.text = "G";
                break;
            case "H":
                this.Name.text = "H";
                break;
            case "I":
                this.Name.text = "I";
                break;
        }
    };
    return DiaLab;
}(Laya.Scene));
exports.default = DiaLab;
},{"./Reader":5}],5:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Diolog_1 = require("./Diolog");
var Reader = /** @class */ (function (_super) {
    __extends(Reader, _super);
    function Reader() {
        var _this = _super.call(this) || this;
        // private finder: number;
        _this.storyPath = "../laya/assets/res/test.csv";
        return _this;
    }
    Reader.prototype.read = function (Num) {
        Laya.loader.load(this.storyPath, new Laya.Handler(this, function (e) {
            Diolog_1.default.instance.nameCase(e.split(",")[Num]);
            if (Diolog_1.default.instance.onlyOnce)
                return;
            Diolog_1.default.instance.story.length = 0;
            Diolog_1.default.instance.story = Diolog_1.default.instance.story.concat(e.split(","));
        }));
    };
    return Reader;
}(Laya.Script));
exports.default = Reader;
},{"./Diolog":4}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3dvcmtzcGFjZS9MYXlhMi9MYXlhQWlySURFL3Jlc291cmNlcy9hcHAvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsInNyYy9HYW1lQ29uZmlnLnRzIiwic3JjL01haW4udHMiLCJzcmMvU2NyaXB0cy9CdXR0b24xLnRzIiwic3JjL1NjcmlwdHMvRGlvbG9nLnRzIiwic3JjL1NjcmlwdHMvUmVhZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1ZBLGdHQUFnRztBQUNoRywyQ0FBcUM7QUFDckMsNkNBQXVDO0FBQ3ZDLDJDQUFxQztBQUNyQzs7RUFFRTtBQUNGO0lBYUk7SUFBYyxDQUFDO0lBQ1IsZUFBSSxHQUFYO1FBQ0ksSUFBSSxHQUFHLEdBQWEsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUM7UUFDN0MsR0FBRyxDQUFDLG1CQUFtQixFQUFDLGdCQUFNLENBQUMsQ0FBQztRQUNoQyxHQUFHLENBQUMsb0JBQW9CLEVBQUMsaUJBQU8sQ0FBQyxDQUFDO1FBQ2xDLEdBQUcsQ0FBQyxtQkFBbUIsRUFBQyxnQkFBTSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQWxCTSxnQkFBSyxHQUFRLElBQUksQ0FBQztJQUNsQixpQkFBTSxHQUFRLElBQUksQ0FBQztJQUNuQixvQkFBUyxHQUFRLE1BQU0sQ0FBQztJQUN4QixxQkFBVSxHQUFRLE1BQU0sQ0FBQztJQUN6QixpQkFBTSxHQUFRLFFBQVEsQ0FBQztJQUN2QixpQkFBTSxHQUFRLE1BQU0sQ0FBQztJQUNyQixxQkFBVSxHQUFLLFdBQVcsQ0FBQztJQUMzQixvQkFBUyxHQUFRLEVBQUUsQ0FBQztJQUNwQixnQkFBSyxHQUFTLEtBQUssQ0FBQztJQUNwQixlQUFJLEdBQVMsS0FBSyxDQUFDO0lBQ25CLHVCQUFZLEdBQVMsS0FBSyxDQUFDO0lBQzNCLDRCQUFp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QUFDLFFBQVE7Z0JBQUUsT0FBTztZQUNyQyxnQkFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztZQUNqQyxnQkFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsZ0JBQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNSLENBQUM7SUFvQkwsYUFBQztBQUFELENBcENBLEFBb0NDLENBcENtQyxJQUFJLENBQUMsTUFBTSxHQW9DOUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXHJcbmltcG9ydCBEaW9sb2cgZnJvbSBcIi4vU2NyaXB0cy9EaW9sb2dcIlxuaW1wb3J0IEJ1dHRvbjEgZnJvbSBcIi4vU2NyaXB0cy9CdXR0b24xXCJcbmltcG9ydCBSZWFkZXIgZnJvbSBcIi4vU2NyaXB0cy9SZWFkZXJcIlxyXG4vKlxyXG4qIOa4uOaIj+WIneWni+WMlumFjee9rjtcclxuKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUNvbmZpZ3tcclxuICAgIHN0YXRpYyB3aWR0aDpudW1iZXI9MTkyMDtcclxuICAgIHN0YXRpYyBoZWlnaHQ6bnVtYmVyPTEwODA7XHJcbiAgICBzdGF0aWMgc2NhbGVNb2RlOnN0cmluZz1cImZ1bGxcIjtcclxuICAgIHN0YXRpYyBzY3JlZW5Nb2RlOnN0cmluZz1cIm5vbmVcIjtcclxuICAgIHN0YXRpYyBhbGlnblY6c3RyaW5nPVwibWlkZGxlXCI7XHJcbiAgICBzdGF0aWMgYWxpZ25IOnN0cmluZz1cImxlZnRcIjtcclxuICAgIHN0YXRpYyBzdGFydFNjZW5lOmFueT1cIk1zZy5zY2VuZVwiO1xyXG4gICAgc3RhdGljIHNjZW5lUm9vdDpzdHJpbmc9XCJcIjtcclxuICAgIHN0YXRpYyBkZWJ1Zzpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIHN0YXQ6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBwaHlzaWNzRGVidWc6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBleHBvcnRTY2VuZVRvSnNvbjpib29sZWFuPXRydWU7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe31cclxuICAgIHN0YXRpYyBpbml0KCl7XHJcbiAgICAgICAgdmFyIHJlZzogRnVuY3Rpb24gPSBMYXlhLkNsYXNzVXRpbHMucmVnQ2xhc3M7XHJcbiAgICAgICAgcmVnKFwiU2NyaXB0cy9EaW9sb2cudHNcIixEaW9sb2cpO1xuICAgICAgICByZWcoXCJTY3JpcHRzL0J1dHRvbjEudHNcIixCdXR0b24xKTtcbiAgICAgICAgcmVnKFwiU2NyaXB0cy9SZWFkZXIudHNcIixSZWFkZXIpO1xyXG4gICAgfVxyXG59XHJcbkdhbWVDb25maWcuaW5pdCgpOyIsImltcG9ydCBHYW1lQ29uZmlnIGZyb20gXCIuL0dhbWVDb25maWdcIjtcclxuY2xhc3MgTWFpbiB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHQvL+agueaNrklEReiuvue9ruWIneWni+WMluW8leaTjlx0XHRcclxuXHRcdGlmICh3aW5kb3dbXCJMYXlhM0RcIl0pIExheWEzRC5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0KTtcclxuXHRcdGVsc2UgTGF5YS5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0LCBMYXlhW1wiV2ViR0xcIl0pO1xyXG5cdFx0TGF5YVtcIlBoeXNpY3NcIl0gJiYgTGF5YVtcIlBoeXNpY3NcIl0uZW5hYmxlKCk7XHJcblx0XHRMYXlhW1wiRGVidWdQYW5lbFwiXSAmJiBMYXlhW1wiRGVidWdQYW5lbFwiXS5lbmFibGUoKTtcclxuXHRcdExheWEuc3RhZ2Uuc2NhbGVNb2RlID0gR2FtZUNvbmZpZy5zY2FsZU1vZGU7XHJcblx0XHRMYXlhLnN0YWdlLnNjcmVlbk1vZGUgPSBHYW1lQ29uZmlnLnNjcmVlbk1vZGU7XHJcblx0XHQvL+WFvOWuueW+ruS/oeS4jeaUr+aMgeWKoOi9vXNjZW5l5ZCO57yA5Zy65pmvXHJcblx0XHRMYXlhLlVSTC5leHBvcnRTY2VuZVRvSnNvbiA9IEdhbWVDb25maWcuZXhwb3J0U2NlbmVUb0pzb247XHJcblxyXG5cdFx0Ly/miZPlvIDosIPor5XpnaLmnb/vvIjpgJrov4dJREXorr7nva7osIPor5XmqKHlvI/vvIzmiJbogIV1cmzlnLDlnYDlop7liqBkZWJ1Zz10cnVl5Y+C5pWw77yM5Z2H5Y+v5omT5byA6LCD6K+V6Z2i5p2/77yJXHJcblx0XHRpZiAoR2FtZUNvbmZpZy5kZWJ1ZyB8fCBMYXlhLlV0aWxzLmdldFF1ZXJ5U3RyaW5nKFwiZGVidWdcIikgPT0gXCJ0cnVlXCIpIExheWEuZW5hYmxlRGVidWdQYW5lbCgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcucGh5c2ljc0RlYnVnICYmIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdKSBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXS5lbmFibGUoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnN0YXQpIExheWEuU3RhdC5zaG93KCk7XHJcblx0XHRMYXlhLmFsZXJ0R2xvYmFsRXJyb3IgPSB0cnVlO1xyXG5cclxuXHRcdC8v5r+A5rS76LWE5rqQ54mI5pys5o6n5Yi277yMdmVyc2lvbi5qc29u55SxSURF5Y+R5biD5Yqf6IO96Ieq5Yqo55Sf5oiQ77yM5aaC5p6c5rKh5pyJ5Lmf5LiN5b2x5ZON5ZCO57ut5rWB56iLXHJcblx0XHRMYXlhLlJlc291cmNlVmVyc2lvbi5lbmFibGUoXCJ2ZXJzaW9uLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uVmVyc2lvbkxvYWRlZCksIExheWEuUmVzb3VyY2VWZXJzaW9uLkZJTEVOQU1FX1ZFUlNJT04pO1xyXG5cdH1cclxuXHJcblx0b25WZXJzaW9uTG9hZGVkKCk6IHZvaWQge1xyXG5cdFx0Ly/mv4DmtLvlpKflsI/lm77mmKDlsITvvIzliqDovb3lsI/lm77nmoTml7blgJnvvIzlpoLmnpzlj5HnjrDlsI/lm77lnKjlpKflm77lkIjpm4bph4zpnaLvvIzliJnkvJjlhYjliqDovb3lpKflm77lkIjpm4bvvIzogIzkuI3mmK/lsI/lm75cclxuXHRcdExheWEuQXRsYXNJbmZvTWFuYWdlci5lbmFibGUoXCJmaWxlY29uZmlnLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uQ29uZmlnTG9hZGVkKSk7XHJcblx0fVxyXG5cclxuXHRvbkNvbmZpZ0xvYWRlZCgpOiB2b2lkIHtcclxuXHRcdC8v5Yqg6L29SURF5oyH5a6a55qE5Zy65pmvXHJcblx0XHRHYW1lQ29uZmlnLnN0YXJ0U2NlbmUgJiYgTGF5YS5TY2VuZS5vcGVuKEdhbWVDb25maWcuc3RhcnRTY2VuZSk7XHJcblx0fVxyXG59XHJcbi8v5r+A5rS75ZCv5Yqo57G7XHJcbm5ldyBNYWluKCk7XHJcbiIsImltcG9ydCBEaWFMYWIgZnJvbSBcIi4vRGlvbG9nXCJcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnV0dG9uMSBleHRlbmRzIExheWEuU2NyaXB0e1xyXG4gICAgcHVibGljIEJ0bjE6IExheWEuQnV0dG9uO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25FbmFibGUoKTogdm9pZHtcclxuICAgICAgICBsZXQgYnV0dG9uOiBMYXlhLkJ1dHRvbiA9IHRoaXMub3duZXIgYXMgTGF5YS5CdXR0b247XHJcbiAgICAgICAgYnV0dG9uLm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsKCk9PntcclxuICAgICAgICBEaWFMYWIuaW5zdGFuY2UuYnV0dG9uMUNsaWNrKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUmVhZGVyIGZyb20gXCIuL1JlYWRlclwiXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERpYUxhYiBleHRlbmRzIExheWEuU2NlbmV7XHJcbiAgICBzdGF0aWMgaW5zdGFuY2U6IERpYUxhYjsvL+iLpeWFtuS7lueoi+W8j+imgeiqv+eUqCDliYflv4XpoIjlrqPlkYpcclxuICAgIHByaXZhdGUgd29yZDogbnVtYmVyOy8v5paH5pys5LitIOavj+S4gOWPpeipseWAi+WIpeeahOWtl+aVuFxyXG4gICAgcHJpdmF0ZSBsaW5lOiBudW1iZXI7Ly/mlofmnKzkuK0g5Y+l5pW4XHJcbiAgICBwcml2YXRlIGxpbmVDb21wbGV0ZTogYm9vbGVhbjsvL+WIpOaWtyDpgJnlj6XoqbHmmK/lkKborJvlroxcclxuICAgIHByaXZhdGUgc3BsaXR0ZWQ6IHN0cmluZzsvL+aKiuaWh+acrOaLhumWi1xyXG4gICAgcHJpdmF0ZSBzaG93V29yZDogbnVtYmVyOy8v6K6T5paH5pys5LiA5a2X5LiA5a2X5Ye654++55qE5Ye95byPXHJcbiAgICBwdWJsaWMgc3Rvcnk6IHN0cmluZ1tdID0gW1wiXCJdOy8v5paH5pysXHJcbiAgICBwdWJsaWMgRGlvbG9nOiBMYXlhLkxhYmVsO1xyXG4gICAgcHVibGljIE5hbWU6IExheWEuTGFiZWw7IFxyXG4gICAgcHJpdmF0ZSByZWFkZXI6IFJlYWRlcjtcclxuICAgIHB1YmxpYyBjaGFOdW06IG51bWJlcjtcclxuICAgIHB1YmxpYyBmaW5kTmV4dDogbnVtYmVyOy8vZXhjZWzmiaPmjolDb21tYW5k5pyJ5bm+5YiX5bCx6KaB5aSa5bCRIOeUqOS+huaJvuWIsOS4i+S4gOWAi+ebuOWQjOashOS9jVxyXG4gICAgcHVibGljIG9ubHlPbmNlOiBib29sZWFuOy8v6K6TUmVhZGVy5Y+W5Ye65paH5pys55qE5YuV5L2c5LiN6KaB6YeN6KSH5Z+36KGMXHJcbiAgICBcclxuICAgIGNyZWF0ZUNoaWxkcmVuKCk6dm9pZCB7XHJcbiAgICAgICAgc3VwZXIuY3JlYXRlQ2hpbGRyZW4oKTtcclxuICAgICAgICB0aGlzLmxvYWRTY2VuZShcIk1zZ1wiKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBEaWFMYWIuaW5zdGFuY2UgPSB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRW5hYmxlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuRGlvbG9nLm9uKExheWEuRXZlbnQuQ0xJQ0ssIHRoaXMsIHRoaXMuQ2xpY2tGbik7XHJcbiAgICB9XHJcblxyXG4gICAgb25Bd2FrZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnJlYWRlciA9IHRoaXMuZ2V0Q29tcG9uZW50KFJlYWRlcik7XHJcbiAgICAgICAgdGhpcy5vbmx5T25jZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubGluZSA9IDc7XHJcbiAgICAgICAgdGhpcy53b3JkID0gMDtcclxuICAgICAgICB0aGlzLmNoYU51bSA9IDY7XHJcbiAgICAgICAgdGhpcy5maW5kTmV4dCA9IDQ7XHJcbiAgICAgICAgdGhpcy5saW5lQ29tcGxldGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLlNob3dXb3JkcygpO1xyXG4gICAgfSAgIFxyXG5cclxuICAgIGJ1dHRvbjFDbGljaygpOnZvaWQge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBTaG93V29yZHMoKTogdm9pZCB7Ly/orpPmlofmnKzkuIDlrZfkuIDlrZflh7rnj75cclxuICAgICAgICB0aGlzLnJlYWRlci5yZWFkKHRoaXMuY2hhTnVtKTtcclxuICAgICAgICB0aGlzLnNob3dXb3JkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNwbGl0dGVkID0gdGhpcy5zdG9yeVt0aGlzLmxpbmVdW3RoaXMud29yZF07Ly/miormlofmnKzmi4bplosgKzHmmK/ngrrkuobpgb/plosg6ZaL6aCt55qE5Luj6JmfXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNwbGl0dGVkID09IHVuZGVmaW5lZCkgcmV0dXJuOyAvL+mBi+ihjOWIsOacgOW+jOS4gOWtl+aZgiDpgb/lhY3lh7rpjK8gIFxyXG4gICAgICAgICAgICB0aGlzLkRpb2xvZy50ZXh0ICs9IHRoaXMuc3BsaXR0ZWQ7XHJcbiAgICAgICAgICAgIHRoaXMud29yZCsrOy8v6Lez5LiL5LiA5YCL5a2XICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0b3J5W3RoaXMubGluZV1bdGhpcy53b3JkXSA9PSB1bmRlZmluZWQpIHsvL+WIpOaWt+atpOWPpeaYr+WQpue1kOadn1xyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnNob3dXb3JkKTsvL+mXnOmWiXNob3dXb3JkXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVDb21wbGV0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAxNTApO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRW5kKCk6IHZvaWQgey8v5Yik5pa36YCZ5Y+l6Kmx5piv5ZCm6Kyb5a6MICYg5paH5pys5piv5ZCm5YWo6YOo6Kyb5a6MXHJcbiAgICAgICAgaWYgKHRoaXMuc3RvcnlbdGhpcy5saW5lICsgdGhpcy5maW5kTmV4dF0gPT0gdW5kZWZpbmVkKSB7IC8v5paH5pys5piv5ZCm57WQ5p2fXHJcbiAgICAgICAgICAgIHRoaXMuRGlvbG9nLm9mZihMYXlhLkV2ZW50LkNMSUNLLCB0aGlzLCB0aGlzLkNsaWNrRm4pOy8v6Zec6ZaJ6bue5pOK5LqL5Lu2XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi57WQ5p2fXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0b3J5W3RoaXMubGluZV1bdGhpcy53b3JkXSA9PSB1bmRlZmluZWQpIHsvL+atpOWPpeaYr+WQpue1kOadn1xyXG4gICAgICAgICAgICB0aGlzLm9ubHlPbmNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy53b3JkID0gMDtcclxuICAgICAgICAgICAgdGhpcy5EaW9sb2cudGV4dCA9IFwiXCI7XHJcbiAgICAgICAgICAgIHRoaXMubGluZSs9dGhpcy5maW5kTmV4dDsvL+S4i+S4gOWPpeipsVxyXG4gICAgICAgICAgICB0aGlzLmNoYU51bSs9dGhpcy5maW5kTmV4dDsvL+S4i+S4gOWAi+S6ulxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIENsaWNrRm4oZTogTGF5YS5FdmVudCk6IHZvaWQgey8v6bue5pOK5LqL5Lu2XHJcbiAgICAgICAgdGhpcy5saW5lQ29tcGxldGUgPSAhdGhpcy5saW5lQ29tcGxldGU7XHJcbiAgICAgICAgaWYgKHRoaXMubGluZUNvbXBsZXRlKSB7Ly/mloflrZfpgoTmspLot7PlrozmmYIg6bue5pOK5L2/5LuW5LiA5qyh6Lez5a6MXHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zaG93V29yZCk7XHJcbiAgICAgICAgICAgIHRoaXMud29yZCA9IHRoaXMuc3RvcnlbdGhpcy5saW5lXS5sZW5ndGg7Ly90aGlzLndvcmQgPSDmraTlj6XmnIDlvozkuIDlgIvlrZcgKOS9nOeCuuaineS7tuWIpOaWt+aYr+WQpumAsuWFpeS4i+S4gOWPpSlcclxuICAgICAgICAgICAgdGhpcy5EaW9sb2cudGV4dCA9IHRoaXMuc3RvcnlbdGhpcy5saW5lXTsvLy5zdWJzdHJpbmcoMCwgdGhpcy5zdG9yeVt0aGlzLmxpbmVdLmxlbmd0aCk7Ly/ot7Plh7rlrozmlbTlj6XlrZAg6YG/6ZaLIOmWi+mgreS7o+iZn1xyXG4gICAgICAgIH0gZWxzZSB7Ly/mloflrZfot7PlrozmmYIg6bue5pOK6Lez5Ye65LiL5LiA5Y+lIOS4puWRvOWPq3Nob3dXb3JkXHJcbiAgICAgICAgICAgIHRoaXMuaXNFbmQoKTsgICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5TaG93V29yZHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgbmFtZUNhc2UobmFtZT86IHN0cmluZyk6IHZvaWQgey8v5oqT5Y+W6ZaL6aCt5Luj6JmfIOaUueiuiuWQjeWtl1xyXG4gICAgICAgIHN3aXRjaCAobmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwi5ZCz5L+e5oGGXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLk5hbWUudGV4dCA9IFwi5ZCz5L+e5oGGXCJcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwi5bCR5aWzXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLk5hbWUudGV4dCA9IFwi5bCR5aWzXCJcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLk5hbWUudGV4dCA9IFwiXCJcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiRFwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5OYW1lLnRleHQgPSBcIkRcIlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJFXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLk5hbWUudGV4dCA9IFwiRVwiXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIkZcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuTmFtZS50ZXh0ID0gXCJGXCJcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiR1wiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5OYW1lLnRleHQgPSBcIkdcIlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJIXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLk5hbWUudGV4dCA9IFwiSFwiXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIklcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuTmFtZS50ZXh0ID0gXCJJXCJcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCBEaWFMYWIgZnJvbSBcIi4vRGlvbG9nXCJcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVhZGVyIGV4dGVuZHMgTGF5YS5TY3JpcHR7XHJcbiAgICBwdWJsaWMgbmFtZVN0YXJ0OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgbGluZVN0YXJ0OiBudW1iZXI7XHJcbiAgICAvLyBwcml2YXRlIGZpbmRlcjogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBzdG9yeVBhdGg6IHN0cmluZyA9IFwiLi4vbGF5YS9hc3NldHMvcmVzL3Rlc3QuY3N2XCI7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWQoTnVtPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgTGF5YS5sb2FkZXIubG9hZCh0aGlzLnN0b3J5UGF0aCwgbmV3IExheWEuSGFuZGxlcih0aGlzLCAoZSkgPT4geyAgICAgIFxyXG4gICAgICAgICAgICBEaWFMYWIuaW5zdGFuY2UubmFtZUNhc2UoZS5zcGxpdChcIixcIilbTnVtXSk7XHJcbiAgICAgICAgICAgIGlmIChEaWFMYWIuaW5zdGFuY2Uub25seU9uY2UpIHJldHVybjtcclxuICAgICAgICAgICAgRGlhTGFiLmluc3RhbmNlLnN0b3J5Lmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIERpYUxhYi5pbnN0YW5jZS5zdG9yeSA9IERpYUxhYi5pbnN0YW5jZS5zdG9yeS5jb25jYXQoZS5zcGxpdChcIixcIikpO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmaW5kTmFtZVN0YXJ0KHRleHQ6IHN0cmluZyk6IHZvaWR7XHJcbiAgICAvLyAgICAgZm9yKHRoaXMuZmluZGVyID0gNjt0aGlzLmZpbmRlciA8IDEwMDt0aGlzLmZpbmRlciArPSBEaWFMYWIuaW5zdGFuY2UuZmluZE5leHQpe1xyXG4gICAgLy8gICAgICAgICBpZih0ZXh0W3RoaXMuZmluZGVyXSAhPSBcIlwiKXtcclxuICAgIC8vICAgICAgICAgICAgIERpYUxhYi5pbnN0YW5jZS5jaGFOdW0gPSB0aGlzLmZpbmRlcjtcclxuICAgIC8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmluZGVyKTtcclxuICAgIC8vICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gfVxyXG5cclxuICAgIC8vIGZpbmRMaW5lU3RhcnQodGV4dDogc3RyaW5nKTogdm9pZHtcclxuICAgIC8vICAgICBmb3IodGhpcy5maW5kZXIgPSA3O3RoaXMuZmluZGVyIDwgMTAwO3RoaXMuZmluZGVyICs9IERpYUxhYi5pbnN0YW5jZS5maW5kTmV4dCl7XHJcbiAgICAvLyAgICAgICAgIGlmKHRleHRbdGhpcy5maW5kZXJdICE9IFwiXCIpe1xyXG4gICAgLy8gICAgICAgICAgICAgRGlhTGFiLmluc3RhbmNlLmxpbmUgPSB0aGlzLmZpbmRlcjtcclxuICAgIC8vICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gfVxyXG59Il19
