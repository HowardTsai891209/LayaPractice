var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var Diolog_1 = require("./Scripts/Diolog");
var Button1_1 = require("./Scripts/Button1");
var Reader_1 = require("./Scripts/Reader");
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
        reg("Scripts/Diolog.ts", Diolog_1.default);
        reg("Scripts/Button1.ts", Button1_1.default);
        reg("Scripts/Reader.ts", Reader_1.default);
    };
    GameConfig.width = 1920;
    GameConfig.height = 1080;
    GameConfig.scaleMode = "full";
    GameConfig.screenMode = "none";
    GameConfig.alignV = "middle";
    GameConfig.alignH = "left";
    GameConfig.startScene = "Msg.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = false;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{"./Scripts/Button1":3,"./Scripts/Diolog":4,"./Scripts/Reader":5}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var Main = /** @class */ (function () {
    function Main() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    Main.prototype.onVersionLoaded = function () {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    };
    Main.prototype.onConfigLoaded = function () {
        //加载IDE指定的场景
        GameConfig_1.default.startScene && Laya.Scene.open(GameConfig_1.default.startScene);
    };
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":1}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Diolog_1 = require("./Diolog");
var Button1 = /** @class */ (function (_super) {
    __extends(Button1, _super);
    function Button1() {
        return _super.call(this) || this;
    }
    Button1.prototype.onEnable = function () {
        var button = this.owner;
        button.on(Laya.Event.CLICK, this, function () {
            Diolog_1.default.instance.button1Click();
        });
    };
    return Button1;
}(Laya.Script));
exports.default = Button1;
},{"./Diolog":4}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Reader_1 = require("./Reader");
var DiaLab = /** @class */ (function (_super) {
    __extends(DiaLab, _super);
    function DiaLab() {
        var _this = _super.call(this) || this;
        _this.story = [""]; //文本
        DiaLab.instance = _this;
        return _this;
    }
    DiaLab.prototype.createChildren = function () {
        _super.prototype.createChildren.call(this);
        this.loadScene("Msg");
    };
    DiaLab.prototype.onEnable = function () {
        this.Diolog.on(Laya.Event.CLICK, this, this.ClickFn);
    };
    DiaLab.prototype.onAwake = function () {
        this.reader = this.getComponent(Reader_1.default);
        this.reader.read(this.chaNum);
        this.word = 0;
        this.line = 5;
        this.chaNum = 4;
        this.findNext = 3;
        this.lineComplete = false;
        this.ShowWords();
    };
    DiaLab.prototype.button1Click = function () {
    };
    DiaLab.prototype.ShowWords = function () {
        var _this = this;
        this.reader.read(this.chaNum);
        this.showWord = setInterval(function () {
            _this.splitted = _this.story[_this.line][_this.word]; //把文本拆開 +1是為了避開 開頭的代號
            if (_this.splitted == undefined)
                return; //運行到最後一字時 避免出錯  
            _this.Diolog.text += _this.splitted;
            _this.word++; //跳下一個字            
            if (_this.story[_this.line][_this.word] == undefined) { //判斷此句是否結束
                clearInterval(_this.showWord); //關閉showWord
                _this.lineComplete = true;
            }
        }, 120);
    };
    DiaLab.prototype.isEnd = function () {
        if (this.story[this.line + this.findNext] == undefined) { //文本是否結束
            this.Diolog.off(Laya.Event.CLICK, this, this.ClickFn); //關閉點擊事件
            console.log("結束");
            return;
        }
        else if (this.story[this.line][this.word] == undefined) { //此句是否結束
            this.word = 0;
            this.Diolog.text = "";
            this.line += this.findNext; //跳下一句話
            this.chaNum += this.findNext;
            return;
        }
    };
    DiaLab.prototype.ClickFn = function (e) {
        this.lineComplete = !this.lineComplete;
        if (this.lineComplete) { //文字還沒跳完時 點擊使他一次跳完
            clearInterval(this.showWord);
            this.word = this.story[this.line].length; //this.word = 此句最後一個字 (作為條件判斷是否進入下一句)
            this.Diolog.text = this.story[this.line]; //.substring(0, this.story[this.line].length);//跳出完整句子 避開 開頭代號
        }
        else { //文字跳完時 點擊跳出下一句 並呼叫showWord
            this.isEnd();
            this.ShowWords();
        }
    };
    DiaLab.prototype.nameCase = function (name) {
        // this.nameNum = this.story[this.line].substring(0, 1);//取出開頭代號
        switch (name) {
            case "吳俞恆":
                DiaLab.instance.Name.text = "吳俞恆";
                break;
            case "少女":
                DiaLab.instance.Name.text = "少女";
                break;
            case "":
                DiaLab.instance.Name.text = "";
                break;
            case "D":
                DiaLab.instance.Name.text = "D";
                break;
            case "E":
                DiaLab.instance.Name.text = "E";
                break;
            case "F":
                DiaLab.instance.Name.text = "F";
                break;
            case "G":
                DiaLab.instance.Name.text = "G";
                break;
            case "H":
                DiaLab.instance.Name.text = "H";
                break;
            case "I":
                DiaLab.instance.Name.text = "I";
                break;
        }
    };
    return DiaLab;
}(Laya.Scene));
exports.default = DiaLab;
},{"./Reader":5}],5:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var Diolog_1 = require("./Diolog");
var Reader = /** @class */ (function (_super) {
    __extends(Reader, _super);
    function Reader() {
        return _super.call(this) || this;
    }
    Reader.prototype.read = function (Num) {
        Laya.loader.load("../laya/assets/res/test.csv", new Laya.Handler(this, function (e) {
            Diolog_1.default.instance.nameCase(e.split(",")[Num]);
            if (Diolog_1.default.instance.line > 5)
                return;
            Diolog_1.default.instance.story.length = 0;
            Diolog_1.default.instance.story = Diolog_1.default.instance.story.concat(e.split(","));
        }));
    };
    return Reader;
}(Laya.Script));
exports.default = Reader;
},{"./Diolog":4}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3dvcmtzcGFjZS9MYXlhMi9MYXlhQWlySURFL3Jlc291cmNlcy9hcHAvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsInNyYy9HYW1lQ29uZmlnLnRzIiwic3JjL01haW4udHMiLCJzcmMvU2NyaXB0cy9CdXR0b24xLnRzIiwic3JjL1NjcmlwdHMvRGlvbG9nLnRzIiwic3JjL1NjcmlwdHMvUmVhZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1ZBLGdHQUFnRztBQUNoRywyQ0FBcUM7QUFDckMsNkNBQXVDO0FBQ3ZDLDJDQUFxQztBQUNyQzs7RUFFRTtBQUNGO0lBYUk7SUFBYyxDQUFDO0lBQ1IsZUFBSSxHQUFYO1FBQ0ksSUFBSSxHQUFHLEdBQWEsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUM7UUFDN0MsR0FBRyxDQUFDLG1CQUFtQixFQUFDLGdCQUFNLENBQUMsQ0FBQztRQUNoQyxHQUFHLENBQUMsb0JBQW9CLEVBQUMsaUJBQU8sQ0FBQyxDQUFDO1FBQ2xDLEdBQUcsQ0FBQyxtQkFBbUIsRUFBQyxnQkFBTSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQWxCTSxnQkFBSyxHQUFRLElBQUksQ0FBQztJQUNsQixpQkFBTSxHQUFRLElBQUksQ0FBQztJQUNuQixvQkFBUyxHQUFRLE1BQU0sQ0FBQztJQUN4QixxQkFBVSxHQUFRLE1BQU0sQ0FBQztJQUN6QixpQkFBTSxHQUFRLFFBQVEsQ0FBQztJQUN2QixpQkFBTSxHQUFRLE1BQU0sQ0FBQztJQUNyQixxQkFBVSxHQUFLLFdBQVcsQ0FBQztJQUMzQixvQkFBUyxHQUFRLEVBQUUsQ0FBQztJQUNwQixnQkFBSyxHQUFTLEtBQUssQ0FBQztJQUNwQixlQUFJLEdBQVMsS0FBSyxDQUFDO0lBQ25CLHVCQUFZLEdBQVMsS0FBSyxDQUFDO0lBQzNCLDRCQUFp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QUFJLGdCQUFNLENBQUMsUUFBUSxDQUFDLElBQUksR0FBRyxDQUFDO2dCQUFFLE9BQU87WUFDckMsZ0JBQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7WUFDakMsZ0JBQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxHQUFHLGdCQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDUixDQUFDO0lBQ0wsYUFBQztBQUFELENBYkEsQUFhQyxDQWJtQyxJQUFJLENBQUMsTUFBTSxHQWE5QyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cclxuaW1wb3J0IERpb2xvZyBmcm9tIFwiLi9TY3JpcHRzL0Rpb2xvZ1wiXG5pbXBvcnQgQnV0dG9uMSBmcm9tIFwiLi9TY3JpcHRzL0J1dHRvbjFcIlxuaW1wb3J0IFJlYWRlciBmcm9tIFwiLi9TY3JpcHRzL1JlYWRlclwiXHJcbi8qXHJcbiog5ri45oiP5Yid5aeL5YyW6YWN572uO1xyXG4qL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lQ29uZmlne1xyXG4gICAgc3RhdGljIHdpZHRoOm51bWJlcj0xOTIwO1xyXG4gICAgc3RhdGljIGhlaWdodDpudW1iZXI9MTA4MDtcclxuICAgIHN0YXRpYyBzY2FsZU1vZGU6c3RyaW5nPVwiZnVsbFwiO1xyXG4gICAgc3RhdGljIHNjcmVlbk1vZGU6c3RyaW5nPVwibm9uZVwiO1xyXG4gICAgc3RhdGljIGFsaWduVjpzdHJpbmc9XCJtaWRkbGVcIjtcclxuICAgIHN0YXRpYyBhbGlnbkg6c3RyaW5nPVwibGVmdFwiO1xyXG4gICAgc3RhdGljIHN0YXJ0U2NlbmU6YW55PVwiTXNnLnNjZW5lXCI7XHJcbiAgICBzdGF0aWMgc2NlbmVSb290OnN0cmluZz1cIlwiO1xyXG4gICAgc3RhdGljIGRlYnVnOmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgc3RhdDpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIHBoeXNpY3NEZWJ1Zzpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIGV4cG9ydFNjZW5lVG9Kc29uOmJvb2xlYW49dHJ1ZTtcclxuICAgIGNvbnN0cnVjdG9yKCl7fVxyXG4gICAgc3RhdGljIGluaXQoKXtcclxuICAgICAgICB2YXIgcmVnOiBGdW5jdGlvbiA9IExheWEuQ2xhc3NVdGlscy5yZWdDbGFzcztcclxuICAgICAgICByZWcoXCJTY3JpcHRzL0Rpb2xvZy50c1wiLERpb2xvZyk7XG4gICAgICAgIHJlZyhcIlNjcmlwdHMvQnV0dG9uMS50c1wiLEJ1dHRvbjEpO1xuICAgICAgICByZWcoXCJTY3JpcHRzL1JlYWRlci50c1wiLFJlYWRlcik7XHJcbiAgICB9XHJcbn1cclxuR2FtZUNvbmZpZy5pbml0KCk7IiwiaW1wb3J0IEdhbWVDb25maWcgZnJvbSBcIi4vR2FtZUNvbmZpZ1wiO1xyXG5jbGFzcyBNYWluIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHRcdFxyXG5cdFx0aWYgKHdpbmRvd1tcIkxheWEzRFwiXSkgTGF5YTNELmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQpO1xyXG5cdFx0ZWxzZSBMYXlhLmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQsIExheWFbXCJXZWJHTFwiXSk7XHJcblx0XHRMYXlhW1wiUGh5c2ljc1wiXSAmJiBMYXlhW1wiUGh5c2ljc1wiXS5lbmFibGUoKTtcclxuXHRcdExheWFbXCJEZWJ1Z1BhbmVsXCJdICYmIExheWFbXCJEZWJ1Z1BhbmVsXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YS5zdGFnZS5zY2FsZU1vZGUgPSBHYW1lQ29uZmlnLnNjYWxlTW9kZTtcclxuXHRcdExheWEuc3RhZ2Uuc2NyZWVuTW9kZSA9IEdhbWVDb25maWcuc2NyZWVuTW9kZTtcclxuXHRcdC8v5YW85a655b6u5L+h5LiN5pSv5oyB5Yqg6L29c2NlbmXlkI7nvIDlnLrmma9cclxuXHRcdExheWEuVVJMLmV4cG9ydFNjZW5lVG9Kc29uID0gR2FtZUNvbmZpZy5leHBvcnRTY2VuZVRvSnNvbjtcclxuXHJcblx0XHQvL+aJk+W8gOiwg+ivlemdouadv++8iOmAmui/h0lEReiuvue9ruiwg+ivleaooeW8j++8jOaIluiAhXVybOWcsOWdgOWinuWKoGRlYnVnPXRydWXlj4LmlbDvvIzlnYflj6/miZPlvIDosIPor5XpnaLmnb/vvIlcclxuXHRcdGlmIChHYW1lQ29uZmlnLmRlYnVnIHx8IExheWEuVXRpbHMuZ2V0UXVlcnlTdHJpbmcoXCJkZWJ1Z1wiKSA9PSBcInRydWVcIikgTGF5YS5lbmFibGVEZWJ1Z1BhbmVsKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5waHlzaWNzRGVidWcgJiYgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0pIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdLmVuYWJsZSgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcuc3RhdCkgTGF5YS5TdGF0LnNob3coKTtcclxuXHRcdExheWEuYWxlcnRHbG9iYWxFcnJvciA9IHRydWU7XHJcblxyXG5cdFx0Ly/mv4DmtLvotYTmupDniYjmnKzmjqfliLbvvIx2ZXJzaW9uLmpzb27nlLFJREXlj5HluIPlip/og73oh6rliqjnlJ/miJDvvIzlpoLmnpzmsqHmnInkuZ/kuI3lvbHlk43lkI7nu63mtYHnqItcclxuXHRcdExheWEuUmVzb3VyY2VWZXJzaW9uLmVuYWJsZShcInZlcnNpb24uanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25WZXJzaW9uTG9hZGVkKSwgTGF5YS5SZXNvdXJjZVZlcnNpb24uRklMRU5BTUVfVkVSU0lPTik7XHJcblx0fVxyXG5cclxuXHRvblZlcnNpb25Mb2FkZWQoKTogdm9pZCB7XHJcblx0XHQvL+a/gOa0u+Wkp+Wwj+WbvuaYoOWwhO+8jOWKoOi9veWwj+WbvueahOaXtuWAme+8jOWmguaenOWPkeeOsOWwj+WbvuWcqOWkp+WbvuWQiOmbhumHjOmdou+8jOWImeS8mOWFiOWKoOi9veWkp+WbvuWQiOmbhu+8jOiAjOS4jeaYr+Wwj+WbvlxyXG5cdFx0TGF5YS5BdGxhc0luZm9NYW5hZ2VyLmVuYWJsZShcImZpbGVjb25maWcuanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Db25maWdMb2FkZWQpKTtcclxuXHR9XHJcblxyXG5cdG9uQ29uZmlnTG9hZGVkKCk6IHZvaWQge1xyXG5cdFx0Ly/liqDovb1JREXmjIflrprnmoTlnLrmma9cclxuXHRcdEdhbWVDb25maWcuc3RhcnRTY2VuZSAmJiBMYXlhLlNjZW5lLm9wZW4oR2FtZUNvbmZpZy5zdGFydFNjZW5lKTtcclxuXHR9XHJcbn1cclxuLy/mv4DmtLvlkK/liqjnsbtcclxubmV3IE1haW4oKTtcclxuIiwiaW1wb3J0IERpYUxhYiBmcm9tIFwiLi9EaW9sb2dcIlxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdXR0b24xIGV4dGVuZHMgTGF5YS5TY3JpcHR7XHJcbiAgICBwdWJsaWMgQnRuMTogTGF5YS5CdXR0b247XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkVuYWJsZSgpOiB2b2lke1xyXG4gICAgICAgIGxldCBidXR0b246IExheWEuQnV0dG9uID0gdGhpcy5vd25lciBhcyBMYXlhLkJ1dHRvbjtcclxuICAgICAgICBidXR0b24ub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywoKT0+e1xyXG4gICAgICAgIERpYUxhYi5pbnN0YW5jZS5idXR0b24xQ2xpY2soKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCBSZWFkZXIgZnJvbSBcIi4vUmVhZGVyXCJcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGlhTGFiIGV4dGVuZHMgTGF5YS5TY2VuZXtcclxuICAgIHN0YXRpYyBpbnN0YW5jZTogRGlhTGFiOy8v6Iul5YW25LuW56iL5byP6KaB6Kq/55SoIOWJh+W/hemgiOWuo+WRilxyXG4gICAgcHJpdmF0ZSB3b3JkOiBudW1iZXI7Ly/mlofmnKzkuK0g5q+P5LiA5Y+l6Kmx5YCL5Yil55qE5a2X5pW4XHJcbiAgICBwdWJsaWMgbGluZTogbnVtYmVyOy8v5paH5pys5LitIOWPpeaVuFxyXG4gICAgcHJpdmF0ZSBsaW5lQ29tcGxldGU6IGJvb2xlYW47Ly/liKTmlrcg6YCZ5Y+l6Kmx5piv5ZCm6Kyb5a6MXHJcbiAgICBwcml2YXRlIHNwbGl0dGVkOiBzdHJpbmc7Ly/miormlofmnKzmi4bplotcclxuICAgIHByaXZhdGUgc2hvd1dvcmQ6IG51bWJlcjsvL+iuk+aWh+acrOS4gOWtl+S4gOWtl+WHuuePvueahOWHveW8j1xyXG4gICAgcHVibGljIHN0b3J5OiBzdHJpbmdbXSA9IFtcIlwiXTsvL+aWh+acrFxyXG4gICAgcHVibGljIERpb2xvZzpMYXlhLkxhYmVsO1xyXG4gICAgcHVibGljIE5hbWU6TGF5YS5MYWJlbDsgXHJcbiAgICBwcml2YXRlIHJlYWRlcjogUmVhZGVyO1xyXG4gICAgcHVibGljIGNoYU51bTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBmaW5kTmV4dDogbnVtYmVyO1xyXG4gICAgXHJcbiAgICBjcmVhdGVDaGlsZHJlbigpOnZvaWQge1xyXG4gICAgICAgIHN1cGVyLmNyZWF0ZUNoaWxkcmVuKCk7XHJcbiAgICAgICAgdGhpcy5sb2FkU2NlbmUoXCJNc2dcIik7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgRGlhTGFiLmluc3RhbmNlID0gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBvbkVuYWJsZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLkRpb2xvZy5vbihMYXlhLkV2ZW50LkNMSUNLLCB0aGlzLCB0aGlzLkNsaWNrRm4pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQXdha2UoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yZWFkZXIgPSB0aGlzLmdldENvbXBvbmVudChSZWFkZXIpO1xyXG4gICAgICAgIHRoaXMucmVhZGVyLnJlYWQodGhpcy5jaGFOdW0pO1xyXG4gICAgICAgIHRoaXMud29yZCA9IDA7XHJcbiAgICAgICAgdGhpcy5saW5lID0gNTtcclxuICAgICAgICB0aGlzLmNoYU51bSA9IDQ7XHJcbiAgICAgICAgdGhpcy5maW5kTmV4dCA9IDM7XHJcbiAgICAgICAgdGhpcy5saW5lQ29tcGxldGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLlNob3dXb3JkcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1dHRvbjFDbGljaygpOnZvaWQge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBTaG93V29yZHMoKTogdm9pZCB7Ly/orpPmlofmnKzkuIDlrZfkuIDlrZflh7rnj75cclxuICAgICAgICB0aGlzLnJlYWRlci5yZWFkKHRoaXMuY2hhTnVtKTtcclxuICAgICAgICB0aGlzLnNob3dXb3JkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNwbGl0dGVkID0gdGhpcy5zdG9yeVt0aGlzLmxpbmVdW3RoaXMud29yZF07Ly/miormlofmnKzmi4bplosgKzHmmK/ngrrkuobpgb/plosg6ZaL6aCt55qE5Luj6JmfXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNwbGl0dGVkID09IHVuZGVmaW5lZCkgcmV0dXJuOyAvL+mBi+ihjOWIsOacgOW+jOS4gOWtl+aZgiDpgb/lhY3lh7rpjK8gIFxyXG4gICAgICAgICAgICB0aGlzLkRpb2xvZy50ZXh0ICs9IHRoaXMuc3BsaXR0ZWQ7XHJcbiAgICAgICAgICAgIHRoaXMud29yZCsrOy8v6Lez5LiL5LiA5YCL5a2XICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0b3J5W3RoaXMubGluZV1bdGhpcy53b3JkXSA9PSB1bmRlZmluZWQpIHsvL+WIpOaWt+atpOWPpeaYr+WQpue1kOadn1xyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnNob3dXb3JkKTsvL+mXnOmWiXNob3dXb3JkXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVDb21wbGV0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAxMjApO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRW5kKCk6IHZvaWQgey8v5Yik5pa36YCZ5Y+l6Kmx5piv5ZCm6Kyb5a6MICYg5paH5pys5piv5ZCm5YWo6YOo6Kyb5a6MXHJcbiAgICAgICAgaWYgKHRoaXMuc3RvcnlbdGhpcy5saW5lICsgdGhpcy5maW5kTmV4dF0gPT0gdW5kZWZpbmVkKSB7IC8v5paH5pys5piv5ZCm57WQ5p2fXHJcbiAgICAgICAgICAgIHRoaXMuRGlvbG9nLm9mZihMYXlhLkV2ZW50LkNMSUNLLCB0aGlzLCB0aGlzLkNsaWNrRm4pOy8v6Zec6ZaJ6bue5pOK5LqL5Lu2XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi57WQ5p2fXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0b3J5W3RoaXMubGluZV1bdGhpcy53b3JkXSA9PSB1bmRlZmluZWQpIHsvL+atpOWPpeaYr+WQpue1kOadn1xyXG4gICAgICAgICAgICB0aGlzLndvcmQgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLkRpb2xvZy50ZXh0ID0gXCJcIjtcclxuICAgICAgICAgICAgdGhpcy5saW5lKz10aGlzLmZpbmROZXh0Oy8v6Lez5LiL5LiA5Y+l6KmxXHJcbiAgICAgICAgICAgIHRoaXMuY2hhTnVtKz10aGlzLmZpbmROZXh0O1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIENsaWNrRm4oZTogTGF5YS5FdmVudCk6IHZvaWQgey8v6bue5pOK5LqL5Lu2XHJcbiAgICAgICAgdGhpcy5saW5lQ29tcGxldGUgPSAhdGhpcy5saW5lQ29tcGxldGU7XHJcbiAgICAgICAgaWYgKHRoaXMubGluZUNvbXBsZXRlKSB7Ly/mloflrZfpgoTmspLot7PlrozmmYIg6bue5pOK5L2/5LuW5LiA5qyh6Lez5a6MXHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zaG93V29yZCk7XHJcbiAgICAgICAgICAgIHRoaXMud29yZCA9IHRoaXMuc3RvcnlbdGhpcy5saW5lXS5sZW5ndGg7Ly90aGlzLndvcmQgPSDmraTlj6XmnIDlvozkuIDlgIvlrZcgKOS9nOeCuuaineS7tuWIpOaWt+aYr+WQpumAsuWFpeS4i+S4gOWPpSlcclxuICAgICAgICAgICAgdGhpcy5EaW9sb2cudGV4dCA9IHRoaXMuc3RvcnlbdGhpcy5saW5lXTsvLy5zdWJzdHJpbmcoMCwgdGhpcy5zdG9yeVt0aGlzLmxpbmVdLmxlbmd0aCk7Ly/ot7Plh7rlrozmlbTlj6XlrZAg6YG/6ZaLIOmWi+mgreS7o+iZn1xyXG4gICAgICAgIH0gZWxzZSB7Ly/mloflrZfot7PlrozmmYIg6bue5pOK6Lez5Ye65LiL5LiA5Y+lIOS4puWRvOWPq3Nob3dXb3JkXHJcbiAgICAgICAgICAgIHRoaXMuaXNFbmQoKTtcclxuICAgICAgICAgICAgdGhpcy5TaG93V29yZHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgbmFtZUNhc2UobmFtZT86IHN0cmluZyk6IHZvaWQgey8v5oqT5Y+W6ZaL6aCt5Luj6JmfIOaUueiuiuWQjeWtl1xyXG4gICAgICAgIC8vIHRoaXMubmFtZU51bSA9IHRoaXMuc3RvcnlbdGhpcy5saW5lXS5zdWJzdHJpbmcoMCwgMSk7Ly/lj5blh7rplovpoK3ku6PomZ9cclxuICAgICAgICBzd2l0Y2ggKG5hbWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcIuWQs+S/nuaBhlwiOlxyXG4gICAgICAgICAgICAgICAgRGlhTGFiLmluc3RhbmNlLk5hbWUudGV4dCA9IFwi5ZCz5L+e5oGGXCJcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwi5bCR5aWzXCI6XHJcbiAgICAgICAgICAgICAgICBEaWFMYWIuaW5zdGFuY2UuTmFtZS50ZXh0ID0gXCLlsJHlpbNcIlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJcIjpcclxuICAgICAgICAgICAgICAgIERpYUxhYi5pbnN0YW5jZS5OYW1lLnRleHQgPSBcIlwiXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIkRcIjpcclxuICAgICAgICAgICAgICAgIERpYUxhYi5pbnN0YW5jZS5OYW1lLnRleHQgPSBcIkRcIlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJFXCI6XHJcbiAgICAgICAgICAgICAgICBEaWFMYWIuaW5zdGFuY2UuTmFtZS50ZXh0ID0gXCJFXCJcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiRlwiOlxyXG4gICAgICAgICAgICAgICAgRGlhTGFiLmluc3RhbmNlLk5hbWUudGV4dCA9IFwiRlwiXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIkdcIjpcclxuICAgICAgICAgICAgICAgIERpYUxhYi5pbnN0YW5jZS5OYW1lLnRleHQgPSBcIkdcIlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJIXCI6XHJcbiAgICAgICAgICAgICAgICBEaWFMYWIuaW5zdGFuY2UuTmFtZS50ZXh0ID0gXCJIXCJcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiSVwiOlxyXG4gICAgICAgICAgICAgICAgRGlhTGFiLmluc3RhbmNlLk5hbWUudGV4dCA9IFwiSVwiXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgRGlhTGFiIGZyb20gXCIuL0Rpb2xvZ1wiXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlYWRlciBleHRlbmRzIExheWEuU2NyaXB0e1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICByZWFkKE51bT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIExheWEubG9hZGVyLmxvYWQoXCIuLi9sYXlhL2Fzc2V0cy9yZXMvdGVzdC5jc3ZcIiwgbmV3IExheWEuSGFuZGxlcih0aGlzLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBEaWFMYWIuaW5zdGFuY2UubmFtZUNhc2UoZS5zcGxpdChcIixcIilbTnVtXSk7XHJcbiAgICAgICAgICAgIGlmIChEaWFMYWIuaW5zdGFuY2UubGluZSA+IDUpIHJldHVybjtcclxuICAgICAgICAgICAgRGlhTGFiLmluc3RhbmNlLnN0b3J5Lmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIERpYUxhYi5pbnN0YW5jZS5zdG9yeSA9IERpYUxhYi5pbnN0YW5jZS5zdG9yeS5jb25jYXQoZS5zcGxpdChcIixcIikpO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxufSJdfQ==
